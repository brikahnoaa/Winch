Thu, May 23, 2019  5:08:20 PM
.0 redo cycle from fall to transmit (deploy is like a fall)
.1 redo log file handling
.1.1 {ant,boy,eng,s16} *LogOpen *LogClose *Log(string)
.1.2 ' ' .me="ant"
.1.3 cfg.c ' ' remove logFile[32]
.1.4 remove current check at 10m, descending
.2 later - separate s39 from ant
.2.1 remove velocity ringnode from s39.c
.3 change iriSendBlock to use one buffer with header defined as struct
.. open/close logs
.. s39

Fri, May  3, 2019 10:03:24 AM
. haru email
https://www.designnews.com/electronics-test/5-lessons-learn-boeing-737-max-fiasco/132367532460732?ADTRK=UBM&elq_mid=8499&elq_cid=90046
Most critical sensor in LARA.
1) CTDs (pressure should be 0 to 100)
2) No RS232 response from Iridium and GPS (we lost the antenna).
Excessive current draw and low battery voltage.
3) acoustic wind speed. Exceedingly high, e.g., 100 m/s
4) battery voltage (<16V and >10 V)
5) internal pressure (>700 <1100)
We should include if clause to check the sanity of CTD pressure value.
If it is out of the expected range (0-100) or no response, it should
stay down.

gps reads: 3x, consistent
+++ remove, just hangup
print actual value after land instruct
default pumpmode=1 biowiper=y
 === buoy sbe16 start 2019-05-01 22:37:07 cDW:fail
-ERR(ctd)       |0| 22:37:31 sbe16 data failure
-ERR(boy)       |0| 22:37:31 : oceanCurr failed cDW:fail

1. At the beginning of noise*.log file from 0 to 8, for a few days dates
were 3/30/2019. Times were different. Could be GPS time reading errors,
but why it fixed the time later?
2. Noise008.log is very large. Seems it concatenated to a one file. This
is the period when LARA stayed at depth for the storm to pass.
2. It seems missing the acoustic wind data of the time just before LARA
rises.  For example, there are date between 07:30 and 08:30, and no data
near 08:00.
3. Starting time of noise*.log gradually becomes later as the dive/fall
cycles progresses. Does it mean that the winch fall speed got slower?
4. noise34.log did not end with the acoustic wind speed.

. errs found post deploy
.. iridSendFile
... pre-alloc larger buffer, up to max block size
... iridBlkSz (<gps.buf)
... send multiple blocks
.. gps datetime read / save glitch
Fri, Mar  1, 2019  4:23:42 PM
v errors to fix
v. data cycle, to only go up once a day
v. write file, send file - lost ability
. verify
v. output log\s16.log log\s39.log
v. datetime for 16+32
v. boy.reset
v. boy.stop
v. config file
. improvements this april
v. humid, press, battery - and turn off after using
v. stay down command (X cycles), count down in syslog
v. save data from 16+32 rise and fall
v. process land commands
v. syslog disk space wspr
v. more info in eng report
v.. temp, ocean curr at dock; cycles
v.. gps drift, surf depth
v.. detections, storm, restart
v.. up bgn/end, down bgn/end
x.. voltage, current, humid, press
v. robust winch commands (resend, detect)
v. set gain, gps time every data cycle (daily)
. test cycle
v. change wispr gain remote (g2 => crash?)
v. change spectra gain
.. iridAuton
. planned, if we have time 
v.0 on start move sys.log to syslog\date\time.log
..1 in case of failure to create files, execute reboot
v.2 collect data from sbe16 and sbe39 both during descent
..3 special test - at 10m. go up, stop, do measurements, come back down
v.4 spectrogram only before rise, not every shutdown
..5 automatic timeout on surface, detected by winch params not buoy code
..6 calendar - season to stay down
..7 more than 1 block per file
..8 englog: land commands
v.9 if rise phase_tmr, then stopCmd

from haru:
CF2 program to work on (3/1/2019)
1. Send command from shore
a. Pre-amp gain (CF2 to WISPR)
b. Change of rise time
c. Cancelling the rises for the following multiple days
i. How many days? (1-250 days, e.g., sea ice season)
d. Change the % of duty cycle.
2. Send data from the buoy
a. CF2 stores the WISPR detections and attach a file for data transmission
b. Battery voltage
c. Free data space of WISPR
d. Run the “spectrogram8kHz” before rise. Send the wind speed and noise level.
e. Measure the tilt angle of mooring from the two CTDs.
f. Stored SBE16 data of previous falling
g. Stored SBE39 data while rising
3. Keep data transmission size under 10 kB per rise.
a. If the buoy stays for many days (e.g., 180 days), there are a lot files to send. What is
the good strategy to catch up the file transmission? Send multiple files per rise? If so,
in what order (e.g., old -&gt;new or new-old?)


Tue, Feb 26, 2019  8:59:09 AM
sed -i 's/boy.testCnt/tst\.testCnt/'
check utlLogPathName(x,x,x)
. ugly
.. iridPhase while loop to send the types of files
.. utlLogFile utlLogPathName
. remote reset
boy.reset is wrong variable
reset after fall phase only
. test
.. multiple rise per day?
.. shorter minutes?
.. tst.various - put all the test garbage in one placy
boy.test to activate
boy.noRise .noIrid .noData .noDeploy .testing .cycleMax .testCnt .testSize
. not on by default
.. ice
.. no rise when wind storm

: time algor
 now - 2am - before?-add24hrs
 test

. wspr
.. storm check control from lara, not wspr start file
.. set clock

Thu, Feb 21, 2019  9:57:01 AM
. options

Sat, Feb  9, 2019  3:17:10 PM
. rise fall
tolerate bad commun
.. data phase
... set rise time
... collect data
one hour, then check current against rise hour; repeat
... storm check (get tougher each day)
. boy.stop = remote stop cmd
. data collection
.. engineering data redux
.. chem data

Tue, Jun 26, 2018  3:45:55 PM
. run out line through entire call phase
. gather data for extended line, antMod depth with brake on
. GPS time -> cf2 -> wispr

